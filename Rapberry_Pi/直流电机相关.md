# 直流电机相关知识

## 直流电机工作原理

直流电动机：将直流电能转换为机械能的电动机。

<div class="imgcap" align="middle">
<center><img src="https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=16e97e04d933c895b2739029b07a1895/d52a2834349b033b4278f54915ce36d3d439bdb4.jpg"><b>直流电机工作原理图</b></div>
</div>

直流电机里边固定有环状永磁体，电流通过转子上的线圈产生安培力，当转子上的线圈与磁场平行时，再继续转受到的磁场方向将改变，因此此时转子末端的电刷跟转换片交替接触，从而线圈上的电流方向也改变，产生的洛伦兹力方向不变，所以电机能保持一个方向转动。

## H桥

H桥（H-Bridge），因外形与H相似故得名，常用于逆变器（DC-AC转换，即直流变交流）。通过开关的开合，将直流电（来自电池等）逆变为某个频率或可变频率的交流电，用于驱动交流电机（异步电机等）。

### H桥用于直流电机工作原理

![典型直流电机控制电路](http://file.elecfans.com/web1/M00/45/56/pIYBAFppK-CAD89vAADyGqvU95U756.png)

上图中所示为一个典型的直流电机控制电路。电路得名于“H桥驱动电路”是因为它的形状酷似字母H。4个三极管组成H的4条垂直腿，而电机就是H中的横杠（注意：图只是示意图，而不是完整的电路图，其中三极管的驱动电路没有画出来）。

![电机运转电流方向1](http://file.elecfans.com/web1/M00/45/56/pIYBAFppK-2AV4EXAAETvdNctiA890.png)

桥式电机驱动电路包括4个三极管和一个电机。要使电机运转，必须导通对角线上的一对三极管。根据不同三极管对的导通情况，电流可能会从左至右或从右至左流过电机，从而控制电机的转向。

要使电机运转，必须使对角线上的一对三极管导通。例如，如下图所示，当Q1管和Q4管导通时，电流就从电源正极经Q1从左至右穿过电机，然后再经Q4回到电源负极。按图中电流箭头所示，该流向的电流将驱动电机顺时针转动。当三极管Q1和Q4导通时，电流将从左至右流过电机，从而驱动电机按特定方向转动（电机周围的箭头指示为顺时针方向）。

![电机运转电流方向2](http://file.elecfans.com/web1/M00/45/53/o4YBAFppK_OAGNDgAADGhthvqaQ994.png)

上图所示为另一对三极管Q2和Q3导通的情况，电流将从右至左流过电机。当三极管Q2和Q3导通时，电流将从右至左流过电机，从而驱动电机沿另一方向转动（电机周围的箭头表示为逆时针方向）。

## 编写代码实现电机转速控制 & 小车转弯控制 & PWM电机转速变化

[小车电机控制python代码](https://github.com/Mingrui-Yu/RaspberryCar/blob/master/PythonCode/move.py)

## PWM

脉冲宽度调制（Pulse width modulation），通过对一系列脉冲的宽度进行调制，来等效地获得所需要的波形（含形状和幅值）， PWM控制技术在逆变电路中应用最广，应用的逆变电路绝大部分是PWM型，广泛应用在从测量、通信到功率控制与变换的许多领域中。

![PWM示意图](http://file.elecfans.com/web1/M00/85/A6/pIYBAFxtAg-ALgXSAAAgSMYQeE0019.jpg)

### 基本原理：

控制方式就是对逆变电路开关器件的通断进行控制，使输出端得到一系列幅值相等的脉冲，用这些脉冲来代替正弦波所需要的波形。也就是在输出波形的半个周期中产生多个脉冲，使各脉冲的等值电压为正弦波形，所获得的输出平滑且低次谐波少。按一定的规则对各脉冲的宽度进行调制，即可改变逆变电路输出电压的大小，也可改变输出频率。

[PWM的作用：一个通俗的解释](https://zhidao.baidu.com/question/551407836.html)

### 正弦波PWM调制：

把正弦半波波形分成N等份，就可把正弦半波看成由N个彼此相连的脉冲所组成的波形。如果把上述脉冲序列用同样数量的等幅而不等宽的矩形脉冲序列代替，使矩形脉冲的中点和相应正弦等分的中点重合，且使矩形脉冲和相应正弦部分面积（即冲量）相等，就得到一组脉冲序列，这就是PWM波形。根据冲量相等效果相同的原理，PWM波形和正弦半波是等效的。

![正弦波PWM调制](http://www.elecfans.com/uploads/allimg/171006/1H40A439-1.jpg)

### PWM特点：

* 从处理器到被控系统信号都是数字形式的，无需进行数模转换，让信号保持为数字形式可将噪声影响降到最小；
* 对噪声抵抗能力增强，从模拟信号转向PWM可以极大地延长通信距离；

### 使用 RPI.GPIO 模块的脉宽调制（PWM）功能

创建一个 PWM 实例：
```
p=GPIO.PWM(channel, frequency) #(引脚, 频率）
```
启用 PWM：
```
p.start(dc)# dc 代表占空比 #范围：0.0<=dc<= 100.0）
```
更改频率：
```
p.ChangeFrequency(freq) #freq为设置的新频率，单位为 Hz
```
更改占空比：
```
p.ChangeDutyCycle(dc) #范围：0.0<=dc<=100.0
```
停止 PWM：
```
p.stop()
```

**********
参考资料：

[直流电动机](https://baike.baidu.com/item/%E7%9B%B4%E6%B5%81%E7%94%B5%E5%8A%A8%E6%9C%BA)

[h桥电路图工作原理图文详解](http://www.elecfans.com/dianzichangshi/20180125622722.html)

[一文读懂PWM原理及其在电源中的应用](http://m.elecfans.com/article/559335.html)

[PWM是什么](http://www.elecfans.com/d/872960.html)

[PWM信号是什么信号?它有什么作用? ](https://zhidao.baidu.com/question/551407836.html)

